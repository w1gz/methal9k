FROM docker.io/alpine:3.8

# bash is mandatory for distillery's release
RUN apk --upgrade --no-cache add bash

# setup a default user
RUN adduser -D hal
USER hal

# prepare environment for mix
ENV APP /app
ENV MIX_ENV prod
WORKDIR $APP

# run the release generated by distillery
CMD $APP/_build/prod/rel/hal/bin/hal console
